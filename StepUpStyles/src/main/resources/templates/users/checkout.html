<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{/users/layout_user :: content(~{::body},~{::title})}">

<head>
	<title>STS | GIỎ HÀNG</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


</head>

<body class="" ng-controller="checkout-ctrl">

	<!-- <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800&display=swap"
		rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700&display=swap" rel="stylesheet"> -->

	<link rel="stylesheet" href="/asset/user/css/cart/open-iconic-bootstrap.min.css">
	<link rel="stylesheet" href="/asset/user/css/cart/animate.css">

	<link rel="stylesheet" href="/asset/user/css/cart/owl.carousel.min.css">
	<link rel="stylesheet" href="/asset/user/css/cart/owl.theme.default.min.css">
	<link rel="stylesheet" href="/asset/user/css/cart/magnific-popup.css">

	<link rel="stylesheet" href="/asset/user/css/cart/aos.css">

	<link rel="stylesheet" href="/asset/user/css/cart/ionicons.min.css">

	<link rel="stylesheet" href="/asset/user/css/cart/bootstrap-datepicker.css">
	<link rel="stylesheet" href="/asset/user/css/cart/jquery.timepicker.css">


	<link rel="stylesheet" href="/asset/user/css/cart/flaticon.css">
	<link rel="stylesheet" href="/asset/user/css/cart/icomoon.css">
	<link rel="stylesheet" href="/asset/user/css/cart/style.css">
	
	<!-- END nav -->

	<div class="hero-wrap hero-bread"
		style="background-image: url('/asset/user/img/nautica.png');background-position-y: 70%;">
		<div class="container">
			<div class="row no-gutters slider-text align-items-center justify-content-center">
				<div class="col-md-9 ftco-animate text-center">
					<p class="breadcrumbs"><span class="mr-2"><a th:href="@{/index}">Trang Chủ</a></span> > <span>Giỏ
							Hàng</span>
					</p>
					<h1 class="mb-0 bread" >THANH TOÁN</h1>
				</div>
			</div>
		</div>
	</div>

	<section class="ftco-section ftco-cart">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 cart-wrap ftco-animate">
					<div style="border-top: 3px tomato solid;" class="cart-total mb-3">
						<div class="row">
							<div class="col-lg-9">
								
								<h3 style="color: tomato;"><i class="fas fa-map-marker-alt"></i>
									Địa Chỉ Giao Hàng</h3>
								<h3>{{addressDefault.user.fullName}} | 09089765989 <span class="badge badge-danger">Mặc
										Định</span></h3> <span>{{addressDefault.addressDetails}},
									{{addressDefault.ward}}, {{addressDefault.district}},
									{{addressDefault.province}}</span>
							</div>
							<div class="col-lg-3">
								<span><a style="color: white;" type="button" data-toggle="modal" data-target="#myModal"
										class="btn btn-primary py-3 px-4"><i class="fas fa-edit"></i> Thay
										Đổi</a></span>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="container">
				<!-- The Modal -->
				<div class="modal fade" id="myModal">
					<div class="modal-dialog modal-lg">
						<div class="modal-content">

							<!-- Modal Header -->
							<div class="modal-header">
								<h4 class="modal-title">Địa Chỉ Của Tôi</h4>
								<button type="button" class="close" data-dismiss="modal">&times;</button>
							</div>

							<!-- Modal body -->
							<div class="modal-body">
								<div class="row card-body" ng-repeat="addr in address ">
									<div class="form-check col-lg-1">
										<input class="form-check-input mg-2" ng-checked="addr.defaultAddress" type="radio" name="exampleRadios"
											 ng-value="addressDefault.defaultAddress" ng-model="addr.defaultAddress" ng-change="updateDefault(addr.shippingAddressId)">
									</div>
									<div class="col-lg-8">

										<h4 style="color: tomato;"><i class="fas fa-map-marker-alt"></i>
											Địa Chỉ Giao Hàng</h3>
											<h4>{{addr.nameReceiver}} | 09089765989 <span ng-show="addr.defaultAddress"
													class="badge badge-danger">Mặc Định</span></h3>
												<span>{{addr.addressDetails}}, {{addr.ward}}, {{addr.district}},
													{{addr.province}}</span>
									</div>

									<div class="col-lg-3">
										<span><a style="color: white;" type="button" data-toggle="modal"
												data-target="#myModal" class="btn btn-primary py-3 px-4" ng-click="edit(addr)"><i
													class="fas fa-edit"></i> Thay Đổi</a></span>
									</div>
									<hr>

								</div>

							</div>

							<!-- Modal footer -->
							<div class="modal-footer" style=" justify-content: start">
								<div style=" justify-content: start">
									<a type="button" class="btn btn-success" data-toggle="modal" data-target="#ModalAddress" ng-click="reset()" data-dismiss="modal"><i class="fa fa-plus"></i> Tạo Mới</a>
								</div>
								<div style=" justify-content: start">
									<a type="button" class="btn btn-danger"  data-dismiss="modal">Close</a>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>

			<!-- *************************************Form address************************************* -->
			<div class="container " >
				<!-- The Modal -->
				<div class="modal fade" id="ModalAddress" data-keyboard="false" data-backdrop="static">
					<div class="modal-dialog modal-md">
						<div class="modal-content">

							<!-- Modal Header -->
							<div class="modal-header">
								<h4 class="modal-title">Địa chỉ mới <br><p>Để đặt hàng, vui lòng thêm địa chỉ nhận hàng</p></h4>
								
								<button type="button" ng-if="check!=false" class="close" data-dismiss="modal">&times;</button>
								
							</div>

							<!-- Modal body -->
							<div class="modal-body " >
								<div class=" card-body cart-wrap  ftco-animate" >
									<form action="#" class="info .ftco-cart">
										<div class="row">

											<div class="form-group col-lg-6 col-md-6 col-sm-12">
												<label for="">Họ Tên</label>
												<input ng-model="form.nameReceiver" type="text" class="form-control text-left px-3" placeholder="">
											</div>
											<div class="form-group col-lg-6 col-md-6 col-sm-12">
												<label for="">Số Điện Thoại</label>
												<input ng-model="form.phone" type="text" class="form-control text-left px-3" placeholder="">
											</div>

										</div>
										<div class="form-group">
											<label for="">Tỉnh/Thành Phố</label>
											<select class="form-control form-control-lg address" id="province"
												ng-model="form.selectedProvince"
												ng-options="province.ProvinceName for province in provinces"
												ng-change="loadDistricts()"
												ng-selected="current_province"
												>
												<!-- <option value="" ng-show="" disabled ng-selected="selected">{{current_province.ProvinceName}}</option> -->
												<option value=""  disabled selected>Chọn Tỉnh/Thành Phố</option>
											</select>
										</div>
										<div class="form-group">
											<label for="">Quận/Huyện</label>
											<select class="form-control form-control-lg" id="district"
												ng-model="form.selectedDistrict"
												ng-options="district.DistrictName for district in form.selectedProvince.Districts"
												ng-change="loadWards()"
												ng-disabled="form.selectedProvince.Districts==null">
												<option value="" disabled selected>Chọn Quận/Huyện</option>
											</select>
										</div>
										<div class="form-group">
											<label for="">Phường/Xã</label>
											<select class="form-control form-control-lg" id="ward"
												ng-model="form.selectedWard"
												ng-options="ward.WardName for ward in form.selectedDistrict.Wards"
												ng-disabled="form.selectedDistrict.Wards==null">
												<option value="" disabled selected>Chọn Phường/Xã</option>
											</select>
										</div>

										<div class="form-group">
											<label for="comment">Địa chỉ cụ thể:</label>
											<textarea ng-model="form.addressDetails" class="form-control text-left px-3"  rows="5" id="comment"></textarea>
										  </div>
										
										<input ng-model="form.checked" ng-disabled="check!=true" class="check" type="checkbox" ng-checked="check==false">
										<label data-toggle="tooltip" data-placement="top" title="Địa chỉ đầu tiên của bạn sẽ được đặt làm mặt định, nếu bạn đã lưu 2 địa chỉ trở lên có thể thay đổi giá trị này" for="check"> Đặt Làm Mặc Định</label>
									</form>

								</div>

							</div>

							<!-- Modal footer -->
							<div class="modal-footer" style=" justify-content: start">
								<div style=" justify-content: start">
									<a type="button" class="btn btn-success" data-dismiss="modal" ng-click="createAddress(form.checked,form.name,form.phone,form.addressDetail)"><i class="fa fa-plus"></i> Luu</a>
								</div>
								<div style=" justify-content: start">
									<a type="button" ng-if="check!=false" class="btn btn-danger" data-dismiss="modal" data-toggle="modal" data-target="#myModal">Close</a>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<!-- <div class="col-lg-6  cart-wrap ftco-animate">

					<div class="cart-total mb-3">
						<h3>Vận Chuyển</h3>
						<p>Nhập vào địa chỉ của bạn để ước tính phí ship</p>
						<form action="#" class="info">
							<div class="form-group">
								<label for="">Tỉnh/Thành Phố</label>
								<input type="text" class="form-control text-left px-3" placeholder="">
							</div>
							<div class="form-group">
								<label for="country">Quận/Huyện</label>
								<input type="text" class="form-control text-left px-3" placeholder="">
							</div>
							<div class="form-group">
								<label for="country">Phường/Xã</label>
								<input type="text" class="form-control text-left px-3" placeholder="">
							</div>
						</form>
						<p><a href="checkout.html" class="btn btn-primary py-3 px-4">Áp Dụng</a></p>
					</div>
				</div> -->
				<div class="col-lg-12 ftco-animate">
					<div class="cart-total mb-3">
						<div class="card">
							<h5 class="card-header">Featured</h5>
							<div class="card-body">
							  <div class="row mb-2" style="width:pad;" ng-repeat="iCart in cartIs">
								<div class="col-lg-2 "><img src="/asset/user/img/cartbg1.jpg" style="padding-left: 0;" width="100%" alt=""></div>
								<div class="col-lg-8">
									<h5 style="vertical-align: middletext-bottom;">{{iCart.product.productName}}</h5>
									<p>Size: {{iCart.productDetail.size.sizeNumber}}, Màu: {{iCart.productDetail.color.colorName}}, Số Lượng: {{iCart.quantity}}</p>
								</div>
								<div class="col-lg-2" style="position: relative;">
									<h3 style="position: absolute ;bottom: 0%;">{{iCart.product.price * iCart.quantity}}</h3>
								</div>
								<hr class="col-lg-11">
							  </div>
							</div>
						  </div>
						<table align="left" class="table table-checkout">
							<tbody>
						
								

								<!-- TR TOTAl -->

								<tr class="ck-left">
									<td colspan="5">
										<div class="cart-total mb-3">
											<h3>Tổng Cộng Giỏ Hàng</h3>
											<p class="d-flex">
												<span>Thành Tiền</span>
												<span>$20.60</span>
											</p>
											<p class="d-flex">
												<span>Phí Ship</span>
												<span>$0.00</span>
											</p>
											<p class="d-flex">
												<span>Giảm Giá</span>
												<span>$3.00</span>
											</p>
											<hr>
											<p class="d-lg-flex total-price">
												<span>Tổng Tiền</span>
												<span>$17.60</span>
											</p>
											<p><a ng-click="sendDataToJava()" class="btn btn-primary py-3 px-4">Tiến Hành Thanh
													Toán</a></p>
										</div>
									</td>

									<!-- <td colspan="2">
										<h3>Tổng Thành Tiền</h3>
									</td>
									<td colspan="2" class="total">$4.90000</td> -->

								</tr>

								<tr class="ck-left">
									<td></td>
									<td colspan="2">
										<h3>Phí Ship</h3>
									</td>
									<td colspan="2" class="total">$4.90000</td>

								</tr>

								<tr class="ck-left">
									<td></td>
									<td colspan="2">
										<h3>Giảm Giá</h3>
									</td>
									<td colspan="2" class="total">$4.90000</td>

								</tr>

								<tr class="ck-left">
									<td></td>
									<td colspan="2">
										<h3>Tổng Thanh Toán</h3>
									</td>
									<td colspan="2" class="total">$4.90000</td>

								</tr>


							</tbody>
						</table>
					</div>
				</div>

			</div>

			<div class="row justify-content-end">
				<div class="col-lg-8 mt-5 cart-wrap ftco-animate">
					<div class="cart-total mb-3">
						<h3>Tổng Cộng Giỏ Hàng</h3>
						<p class="d-flex">
							<span>Thành Tiền</span>
							<span>$20.60</span>
						</p>
						<p class="d-flex">
							<span>Phí Ship</span>
							<span>$0.00</span>
						</p>
						<p class="d-flex">
							<span>Giảm Giá</span>
							<span>$3.00</span>
						</p>
						<hr>
						<p class="d-lg-flex total-price">
							<span>Tổng Tiền</span>
							<span>$17.60</span>
						</p>
						<p><a href="checkout.html" class="btn btn-primary py-3 px-4">Tiến Hành Thanh Toán</a></p>
						<p><a ng-click="getDataPayment()" th:href ="@{/submitOrder}" class="btn btn-primary py-3 px-4">vnpayn</a></p>
					</div>
				</div>
				<div class="col-lg-4 mt-5 cart-wrap ftco-animate">
					<div class="cart-total mb-3">
						<h3>Mã Giảm Giá</h3>
						<p>Nhập mã giảm giá mà bạn đang có để áp dụng giảm giá</p>
						<form action="#" class="info">
							<div class="form-group">
								<label for="">Mã giảm giá</label>
								<input type="text" class="form-control text-left px-3" placeholder="">
							</div>
						</form>
						<p><a href="checkout.html" class="btn btn-primary py-3 px-4">Áp dụng</a></p>
					</div>
				</div>

				<!-- <div class="col-lg-4 mt-5 cart-wrap ftco-animate">

					<div class="cart-total mb-3">
						<h3>Estimate shipping and tax</h3>
						<p>Enter your destination to get a shipping estimate</p>
						<form action="#" class="info">
							<div class="form-group">
								<label for="">Country</label>
								<input type="text" class="form-control text-left px-3" placeholder="">
							</div>
							<div class="form-group">
								<label for="country">State/Province</label>
								<input type="text" class="form-control text-left px-3" placeholder="">
							</div>
							<div class="form-group">
								<label for="country">Zip/Postal Code</label>
								<input type="text" class="form-control text-left px-3" placeholder="">
							</div>
						</form>
					</div>
					<p><a href="checkout.html" class="btn btn-primary py-3 px-4">Estimate</a></p>
				</div> -->


			</div>
		</div>
	</section>

	<section class="ftco-section ftco-no-pt ftco-no-pb py-5 bg-light">
		<div class="container py-4">
			<div class="row d-flex justify-content-center py-5">
				<div class="col-md-6">
					<h2 style="font-size: 22px;" class="mb-0">Subcribe to our Newsletter</h2>
					<span>Get e-mail updates about our latest shops and special offers</span>
				</div>
				<div class="col-md-6 d-flex align-items-center">
					<form action="#" class="subscribe-form">
						<div class="form-group d-flex">
							<input type="text" class="form-control" placeholder="Enter email address">
							<input type="submit" value="Subscribe" class="submit px-3">
						</div>
					</form>
				</div>
			</div>
		</div>
	</section>
	<footer class="ftco-footer ftco-section">
		<div class="container">
			<div class="row">
				<div class="mouse">
					<a href="#" class="mouse-icon">
						<div class="mouse-wheel">^</div>
					</a>
				</div>
			</div>

		</div>
	</footer>



	<!-- loader -->
	<div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
			<circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
			<circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
				stroke="#F96D00" />
		</svg></div>


	<script src="/asset/user/js/cart/jquery.min.js"></script>
	<script src="/asset/user/js/cart/jquery-migrate-3.0.1.min.js"></script>
	<script src="/asset/user/js/cart/popper.min.js"></script>
	<script src="/asset/user/js/cart/bootstrap.min.js"></script>
	<script src="/asset/user/js/cart/jquery.easing.1.3.js"></script>
	<script src="/asset/user/js/cart/jquery.waypoints.min.js"></script>
	<script src="/asset/user/js/cart/jquery.stellar.min.js"></script>
	<script src="/asset/user/js/cart/owl.carousel.min.js"></script>
	<script src="/asset/user/js/cart/jquery.magnific-popup.min.js"></script>
	<script src="/asset/user/js/cart/aos.js"></script>
	<script src="/asset/user/js/cart/jquery.animateNumber.min.js"></script>
	<script src="/asset/user/js/cart/bootstrap-datepicker.js"></script>
	<script src="/asset/user/js/cart/scrollax.min.js"></script>
	<script
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
	<script src="/asset/user/js/cart/google-map.js"></script>
	<script src="/asset/user/js/cart/main.js"></script>

	<script>
		$(document).ready(function () {

			var quantitiy = 0;
			$('.quantity-right-plus').click(function (e) {

				// Stop acting like a button
				e.preventDefault();
				// Get the field name
				var quantity = parseInt($('#quantity').val());

				// If is not undefined

				$('#quantity').val(quantity + 1);


				// Increment

			});

			$('.quantity-left-minus').click(function (e) {
				// Stop acting like a button
				e.preventDefault();
				// Get the field name
				var quantity = parseInt($('#quantity').val());

				// If is not undefined

				// Increment
				if (quantity > 0) {
					$('#quantity').val(quantity - 1);
				}
			});

		});
	</script>

</body>

</html>