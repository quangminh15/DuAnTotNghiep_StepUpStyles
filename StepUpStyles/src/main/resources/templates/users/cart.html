<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{/users/layout_user :: content(~{::body},~{::title})}">

<head>
	<title>FSHOP | GIỎ HÀNG</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


</head>

<body class="" ng-controller="cart-ctrl">

	<!-- <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800&display=swap"
		rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700&display=swap" rel="stylesheet"> -->

	<link rel="stylesheet" href="/asset/user/css/cart/open-iconic-bootstrap.min.css">
	<link rel="stylesheet" href="/asset/user/css/cart/animate.css">

	<link rel="stylesheet" href="/asset/user/css/cart/owl.carousel.min.css">
	<link rel="stylesheet" href="/asset/user/css/cart/owl.theme.default.min.css">
	<link rel="stylesheet" href="/asset/user/css/cart/magnific-popup.css">

	<link rel="stylesheet" href="/asset/user/css/cart/aos.css">

	<link rel="stylesheet" href="/asset/user/css/cart/ionicons.min.css">

	<link rel="stylesheet" href="/asset/user/css/cart/bootstrap-datepicker.css">
	<link rel="stylesheet" href="/asset/user/css/cart/jquery.timepicker.css">


	<link rel="stylesheet" href="/asset/user/css/cart/flaticon.css">
	<link rel="stylesheet" href="/asset/user/css/cart/icomoon.css">
	<link rel="stylesheet" href="/asset/user/css/cart/style.css">
	<!-- END nav -->


	<div ng-show="page==true">
		<section class="ftco-section ftco-cart">
			<div class="container ">
				<div class="row bg-white">
					<div class="col-lg-12  ftco-animate pl-0 pr-0">
						<div class="cart-list">

							<table class="table">
								<thead class="text-white " style="background-color: orangered;">
									<tr class="text-left font-weight-bolder">
										<th class="align-middle">
											<input type="checkbox" ng-click="checkBox()" id="checkAll"
												ng-model="item.isSelected" />

										</th>
										<th class="text-left ">
											<div class="subth">
												Sản Phẩm
											</div>
										</th>

										<th>
											<div class="subth">Thuộc Tính</div>
										</th>

										<th>
											<div class="subth">Đơn Giá</div>
										</th>
										<th>
											<div class="subth">Số Lượng</div>
										</th>
										<th>
											<div class="subth">Thành Tiền</div>
										</th>
										<th></th>
									</tr>
								</thead>
								<tbody>



									<tr class="text-left" ng-repeat="item in items">
										<td>
											<input ng-if="item.quantity <= item.productDetail.quantity" type="checkbox"
												ng-checked="item.isSelected" ng-click="checkOne($index)" />
										</td>

										<td class="image-prod ">

											<div class="d-flex align-items-center">

												<img class="pic-2 img-fluid"
													ng-src="{{item.product.productImages[1].imagePath}}">


												<div style="max-width: 300px; overflow: hidden;display: -webkit-box;
												-webkit-box-orient: vertical;
												-webkit-line-clamp: 2;" class="ml-3 text-left align-middle">{{item.product.productName}}</div>
											</div>

										</td>


										<!-- <td class="product-name">
											<h3>{{item.product.productName}}</h3>
											 <p>Far far away, behind the word mountains, far from the countries</p> -->
										
										</td>
										<td>
											<div class="row text-left">

												<div class="dropdown col-md-lg-5 col-md-12 col-sm-12  mt-1">

													<a class=" dropdown-toggle" role="button" id="dropdownMenuLink"
														data-toggle="dropdown" aria-haspopup="true"
														aria-expanded="false">
														Màu: {{item.productDetail.color.colorName}}
													</a>


													<div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
														<a class="dropdown-item" style="color: black; width: 20px;"
															ng-repeat="c in item.colors| unique:'colorName' "
															ng-click="updateCartItemByColor(c.colorID,item.cartDetailId,$parent.$index)"
															ng-show="item.productDetail.color.colorID != c.colorID && !isColorDisabled(item.product.productID, c.colorID, item.productDetail.size.sizeID)">
															{{c.colorName}}
														</a>

													</div>
												</div>


												<div class="dropdown col-md-lg-5 col-md-12 col-sm-12 mt-1">
													<a class=" dropdown-toggle" role="button" id="dropdownMenuLink"
														data-toggle="dropdown" aria-haspopup="true"
														aria-expanded="false">
														Size: {{item.productDetail.size.sizeNumber}}
													</a>

													<div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
														<a class="dropdown-item" style="color: black;"
															ng-repeat="s in item.sizes| unique:'sizeNumber'"
															ng-click="updateCartItemBySize(s.sizeID,item.cartDetailId,$parent.$index)"
															ng-show="item.productDetail.size.sizeID != s.sizeID && !isSizeDisabled(item.product.productID, s.sizeID, item.productDetail.color.colorID)">
															{{s.sizeNumber}}
														</a>

													</div>
												</div>
											</div>
										</td>
										<!-- <td> -->
										<!--  -->
										<!-- <div class="container mt-5">

												<div class="dropdown">

													<a class="btn btn-primary dropdown-toggle" type="button"
														id="dropdownMenuButton" data-toggle="dropdown"
														aria-haspopup="true" aria-expanded="false">
														{{item.productDetail.size.sizeNumber}}
													</a>
													<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">

														<div class="card-body">
															<div class="row ">
																<a class="btn btn-primary mr-2 mb-2"
																	ng-repeat="s in item.sizes| unique:'sizeNumber'"
																	ng-click="updateCartItemBySize(s.sizeID,item.cartDetailId,$parent.$index)"
																	ng-show="item.productDetail.size.sizeID != s.sizeID && !isSizeDisabled(item.product.productID, s.sizeID, item.productDetail.color.colorID)">
																	{{s.sizeNumber}}</a>
															</div>
														</div>
													</div>
												</div>
											</div> -->
										<!-- </td> -->

										<td class="price text-left"><span class="price"
											ng-if="item.product.directDiscounts[0].priceDiscount == null"> {{
												item.product.price | number:0 }} ₫</span> <span class="price"
											ng-if="item.product.directDiscounts[0].status === 'Đang diễn ra' && item.product.directDiscounts[0].priceDiscount">
											<del class="text-secondary">{{item.product.price | number:0 }} ₫</del> {{
												item.product.directDiscounts[0].priceDiscount | number:0 }} ₫
										</span> <span class="price"
											ng-if="item.product.directDiscounts[0].status !== 'Đang diễn ra' && item.product.directDiscounts[0].priceDiscount">
											{{ item.product.price | number:0 }} ₫ </span>
										</td>

										<td class=" ftco-cart quantity ">
											<div ng-if=" item.productDetail.quantity > 0" 
												style="width: 60%;" class="text-center">
												<div class="input-group  d-flex">

													<button class="btn btn-primary quantity-left-minus"
														ng-click="updateQuantity($index, 0)"
														ng-disabled="item.quantity==1"><span>
	
															<i class="fas fa-minus"></i>
														</span>
													</button>
													<input type="number" name="quantity"
														class="quantity form-control input-number" ng-model="item.quantity"
														ng-value="item.quantity" min="1" max="100"
														ng-change="updateQuantity($index, 2)">
													<button class="btn btn-primary quantity-right-plus"
														ng-click="updateQuantity($index, 1)"
														ng-disabled="item.quantity==item.productDetail.quantity"><span>
	
															<i class="fas fa-plus"></i>
														</span>
													</button>
												</div>
												<p class="mt-1 text-secondary">{{item.productDetail.quantity}} sản phẩm có sẵn</p>
											</div>
											
											<div ng-if="item.productDetail.quantity<=0"
												class="d-flex align-items-center justify-content-start ml-3">
												<p class="text-danger">
													Sản phẩm hiện đang hết hàng
												</p>
											</div>
										</td>

										<td class="total text-left">

											<span class="price"
											ng-if="item.product.directDiscounts[0].priceDiscount == null"> {{
												item.product.price*item.quantity| number:0 }} ₫</span> <span class="price"
											ng-if="item.product.directDiscounts[0].status === 'Đang diễn ra' && item.product.directDiscounts[0].priceDiscount">
											{{
												item.product.directDiscounts[0].priceDiscount*item.quantity | number:0 }} ₫
										</span> <span class="price"
											ng-if="item.product.directDiscounts[0].status !== 'Đang diễn ra' && item.product.directDiscounts[0].priceDiscount">
											{{ item.product.price*item.quantity | number:0 }} ₫ </span>
										</td>
										<td class="product-remove "><a ng-click="delete(item.cartDetailId)">X</a></td>
									</tr><!-- END TR-->
								</tbody>
							</table>
						</div>

					</div>
					<!-- <div class="col-lg-4 .ftco-cart cart-wrap ftco-animate">
					
						<div class="cart-total mb-3">
							<h3>Vận Chuyển</h3>
							<p><a class="btn btn-primary" data-toggle="collapse" href="#collapseExample" role="button"
									aria-expanded="false" aria-controls="collapseExample">Nhập vào địa chỉ của bạn để
									ước
									tính phí ship</a></p>

							<div class="collapse" id="collapseExample">
								<div class="card card-body">
									<form action="#" class="info">
									

										<div class="form-group">
											<label for="">Tỉnh/Thành Phố</label>
											<select class="form-control form-control-lg address" id="province"
												ng-model="selectedProvince"
												ng-options="province.ProvinceName for province in provinces"
												ng-change="loadDistricts()"
												>
												<option value="" disabled selected>Chọn Tỉnh/Thành Phố</option>
											</select>
										</div>
										<div class="form-group">
											<label for="">Quận/Huyện</label>
											<select class="form-control form-control-lg" id="district"
												ng-model="selectedDistrict"
												ng-options="district.DistrictName for district in selectedProvince.Districts"
												ng-change="loadWards()"
												ng-disabled="selectedProvince.Districts==null">
												<option value="" disabled selected>Chọn Quận/Huyện</option>
											</select>
										</div>
										<div class="form-group">
											<label for="">Phường/Xã</label>
											<select class="form-control form-control-lg" id="ward"
												ng-model="selectedWard"
												ng-options="ward.WardName for ward in selectedDistrict.Wards">
												<option value="" disabled selected>Chọn Phường/Xã</option>
											</select>
										</div>


									</form>
									<p><a ng-click="calculateShipping()" class="btn btn-primary py-3 px-4">Áp Dụng</a></p>
								</div>
							</div>

						</div>
						<div class="cart-total mb-3">
							<h3>Tổng Cộng Giỏ Hàng</h3>
							<p class="d-flex">
								<span>Thành Tiền</span>
								<span>$20.60</span>
							</p>
							<p class="d-flex">
								<span>Phí Ship</span>
								<span>{{shippingFee}}</span>
							</p>
							<p class="d-flex">
								<span>Giảm Giá</span>
								<span>$3.00</span>
							</p>
							<hr>
							<p class="d-lg-flex total-price">
								<span>Tổng Tiền</span>
								<span>{{tongTien}}</span>
							</p>
							<p><a th:href="@{/checkout}" ng-if="checkButton()" class="btn btn-primary py-3 px-4">Tiến Hành Thanh Toán</a></p>
						</div>

					</div> -->


					<!-- <div class=" justify-content-end"> -->

				</div>
				<div class="row mt-3">
					<!-- <div class="col-lg-6 .ftco-cart cart-wrap ftco-animate">
					
						<div class="cart-total mb-3">
							<h3>Vận Chuyển</h3>
							<p><a class="btn btn-primary" data-toggle="collapse" href="#collapseExample" role="button"
									aria-expanded="false" aria-controls="collapseExample">Nhập vào địa chỉ của bạn để
									ước
									tính phí ship</a></p>

							<div class="collapse" id="collapseExample">
								<div class="card card-body">
									<form action="#" class="info">
									

										<div class="form-group">
											<label for="">Tỉnh/Thành Phố</label>
											<select class="form-control form-control-lg address" id="province"
												ng-model="selectedProvince"
												ng-options="province.ProvinceName for province in provinces"
												ng-change="loadDistricts()"
												>
												<option value="" disabled selected>Chọn Tỉnh/Thành Phố</option>
											</select>
										</div>
										<div class="form-group">
											<label for="">Quận/Huyện</label>
											<select class="form-control form-control-lg" id="district"
												ng-model="selectedDistrict"
												ng-options="district.DistrictName for district in selectedProvince.Districts"
												ng-change="loadWards()"
												ng-disabled="selectedProvince.Districts==null">
												<option value="" disabled selected>Chọn Quận/Huyện</option>
											</select>
										</div>
										<div class="form-group">
											<label for="">Phường/Xã</label>
											<select class="form-control form-control-lg" id="ward"
												ng-model="selectedWard"
												ng-options="ward.WardName for ward in selectedDistrict.Wards">
												<option value="" disabled selected>Chọn Phường/Xã</option>
											</select>
										</div>


									</form>
									<p><a ng-click="calculateShipping()" class="btn btn-primary py-3 px-4">Áp Dụng</a></p>
								</div>
							</div>

						</div>
						

					</div> -->


					<!-- <div class=" justify-content-end"> -->
					<div class="col-lg-12 pl-0 pr-0 ftco-animate">

						<div class="cart-total mb-3 " style="background-color: #fff;">
							<div class="row">

								<div class="col-md-7">

								</div>

								<div class="col-md-5">

									<h3>Tổng Cộng Giỏ Hàng</h3>
									<p class="d-flex">
										<span class="font-weight-bolder">Thành Tiền</span>
										<span class="text-right">{{tongTien | number:0 }} ₫</span>
									</p>
									<p class="d-flex">
										<span class="font-weight-bolder">Phí Ship</span>
										<span class="text-right">{{!shippingFee?0: shippingFee| number:0 }} ₫</span>
									</p>
									
									<hr>
									<p class="d-lg-flex total-price">
										<span class="font-weight-bolder">Tổng Tiền</span>
										<span class="text-right">{{tongTien + shippingFee| number:0 }} ₫</span>
									</p>
									<p><a ng-click="checkout()" style="text-decoration: none;"
											class="btn btn-primary py-3 px-4">Tiến Hành Thanh
											Toán</a></p>
								</div>
							</div>

						</div>
					</div>

				</div>
			</div>
		</section>
	</div>
	</div>

	<div ng-show="page==false" style="display: flex; justify-content: center;min-height: 30em;">
		<!-- <div>
			<img src="/asset/user/img/e.jpg" alt="">
			<h1>Mua Hàng đê giỏ hàng trống lỏng z !!!</h1>
		</div> -->
		<div class="table-responsive d-flex justify-content-center text-center align-items-center"
			style="min-height: 200px;">
			<div class="px-5 py-5 rounded-pill" style="background-color: rgba(174, 174, 174, 0.109);">
				<img src="/asset/user/img/emptyorder.png" class="mb-2" alt="">
				<h3>Giỏ hàng của bạn đang trống</h3>
				<a href="/list_products" class="btn" style="background-color: #ff7315; color: white;">Tiếp tục mua sắm</a>
			</div>
		</div>
		
	</div>




	<!-- loader -->
	<div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
			<circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
			<circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
				stroke="#F96D00" />
		</svg></div>


	<script src="/asset/user/js/cart/jquery.min.js"></script>
	<script src="/asset/user/js/cart/jquery-migrate-3.0.1.min.js"></script>
	<script src="/asset/user/js/cart/popper.min.js"></script>
	<!-- <script src="/asset/user/js/cart/bootstrap.min.js"></script> -->
	<script src="/asset/user/js/cart/jquery.easing.1.3.js"></script>
	<script src="/asset/user/js/cart/jquery.waypoints.min.js"></script>
	<script src="/asset/user/js/cart/jquery.stellar.min.js"></script>
	<script src="/asset/user/js/cart/owl.carousel.min.js"></script>
	<script src="/asset/user/js/cart/jquery.magnific-popup.min.js"></script>
	<script src="/asset/user/js/cart/aos.js"></script>
	<script src="/asset/user/js/cart/jquery.animateNumber.min.js"></script>
	<script src="/asset/user/js/cart/bootstrap-datepicker.js"></script>
	<script src="/asset/user/js/cart/scrollax.min.js"></script>
	<!-- <script
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
	<script src="/asset/user/js/cart/google-map.js"></script> -->
	<script src="/asset/user/js/cart/main.js"></script>

	<script>
		$(document).ready(function () {

			var quantitiy = 0;
			$('.quantity-right-plus').click(function (e) {

				// Stop acting like a button
				e.preventDefault();
				// Get the field name
				var quantity = parseInt($('#quantity').val());

				// If is not undefined

				$('#quantity').val(quantity + 1);


				// Increment

			});

			$('.quantity-left-minus').click(function (e) {
				// Stop acting like a button
				e.preventDefault();
				// Get the field name
				var quantity = parseInt($('#quantity').val());

				// If is not undefined

				// Increment
				if (quantity > 0) {
					$('#quantity').val(quantity - 1);
				}
			});

		});
	</script>

</body>

</html>